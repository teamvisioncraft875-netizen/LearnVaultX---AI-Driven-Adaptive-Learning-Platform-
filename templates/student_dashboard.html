{% extends "base.html" %}

{% block title %}Student Dashboard - LearnVaultX{% endblock %}

{% block content %}
<!-- STUDENT DASHBOARD - FINAL POLISHED VERSION -->
<div class="student-app">
    <!-- LEFT SIDEBAR - FIXED -->
    <aside class="stud-sidebar" id="studSidebar">
        <div class="sidebar-brand-area">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="LearnVaultX" class="brand-logo-img">
            <span class="brand-title-text">LearnVaultX</span>
            <span class="brand-role-badge">Student</span>
        </div>

        <nav class="sidebar-nav-menu">
            <a href="#" class="nav-menu-item active" onclick="switchStudentView('dashboard'); return false;">
                <span class="item-icon">üìö</span>
                <span class="item-label">My Classes</span>
            </a>
            <a href="#" class="nav-menu-item" onclick="switchStudentView('join'); return false;">
                <span class="item-icon">‚ûï</span>
                <span class="item-label">Join Class</span>
            </a>
            <a href="#" class="nav-menu-item" onclick="switchStudentView('browse'); return false;">
                <span class="item-icon">üîç</span>
                <span class="item-label">Browse Classes</span>
            </a>
            <a href="#" class="nav-menu-item" onclick="switchStudentView('recommendations'); return false;">
                <span class="item-icon">üéØ</span>
                <span class="item-label">AI Recommendations</span>
            </a>
            <a href="#" class="nav-menu-item" onclick="switchStudentView('gaps'); return false;">
                <span class="item-icon">üß©</span>
                <span class="item-label">Knowledge Gaps</span>
            </a>
            <a href="#" class="nav-menu-item" onclick="switchStudentView('progress'); return false;">
                <span class="item-icon">üìä</span>
                <span class="item-label">My Progress</span>
            </a>
            <a href="/student/analytics" class="nav-menu-item">
                <span class="item-icon">üìà</span>
                <span class="item-label">Analytics</span>
            </a>
            <a href="/student/quiz-history" class="nav-menu-item">
                <span class="item-icon">üìù</span>
                <span class="item-label">Quiz History</span>
            </a>
        </nav>

        <div class="sidebar-user-profile">
            <div class="user-avatar">{{ session.name[0] if session.name else 'S' }}</div>
            <div class="user-info">
                <div class="user-name">{{ session.name }}</div>
                <div class="user-email">{{ session.get('email', 'student@example.com') }}</div>
            </div>
        </div>

        <div class="sidebar-logout-area">
            <a href="/logout" class="logout-button">
                <span class="logout-ico">üö™</span>
                <span class="logout-txt">Logout</span>
            </a>
        </div>
    </aside>

    <!-- CENTER CONTENT - ADAPTIVE -->
    <main class="stud-center" id="studCenter">
        <!-- Mobile Header -->
        <div class="stud-mobile-head">
            <button class="mob-sidebar-btn" onclick="toggleStudSidebar()">‚ò∞</button>
            <span class="mob-brand-text">LearnVaultX</span>
            <button class="mob-ai-btn" onclick="toggleStudAI()">ü§ñ</button>
        </div>

        <!-- DASHBOARD VIEW -->
        <div class="stud-view" id="dashboardView">
            <div class="stud-view-head">
                <h1 class="view-main-title">Welcome back, {{ session.name }}!</h1>
                <p class="view-sub-text">Continue your learning journey</p>
            </div>

            <div class="stud-view-body">
                <!-- Quick Actions -->
                <section class="view-section">
                    <h2 class="section-label">Quick Actions</h2>
                    <div class="quick-act-grid">
                        <div class="quick-act-box" onclick="switchStudentView('browse')">
                            <div class="qact-icon">üîç</div>
                            <h3 class="qact-title">Browse Classes</h3>
                            <p class="qact-text">Discover new courses</p>
                        </div>
                        <div class="quick-act-box" onclick="openStudAI()">
                            <div class="qact-icon">ü§ñ</div>
                            <h3 class="qact-title">AI Tutor</h3>
                            <p class="qact-text">Get instant help</p>
                        </div>
                        <div class="quick-act-box" onclick="switchStudentView('progress')">
                            <div class="qact-icon">üìà</div>
                            <h3 class="qact-title">View Progress</h3>
                            <p class="qact-text">Track achievements</p>
                        </div>
                    </div>
                </section>

                <!-- Active Classes -->
                <section class="view-section">
                    <div class="section-head-row">
                        <h2 class="section-label">Active Classes</h2>
                    </div>
                    <div id="studClassesGrid" class="stud-classes-grid">
                        <div class="loading-box">
                            <div class="loading-spinner"></div>
                            <p class="loading-text">Loading your classes...</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- JOIN CLASS VIEW -->
        <div class="stud-view" id="joinView" style="display: none;">
            <div class="stud-view-head">
                <h1 class="view-main-title">Join a Class</h1>
                <p class="view-sub-text">Enter the class code provided by your teacher</p>
            </div>

            <div class="stud-view-body">
                <div class="join-class-container">
                    <div class="join-class-card">
                        <div class="join-icon-area">
                            <div class="join-icon">üéì</div>
                        </div>
                        <h3 class="join-card-title">Enter Class Code</h3>
                        <p class="join-card-desc">Your teacher will provide you with a unique class code</p>

                        <div class="join-input-group">
                            <input type="text" id="classCodeInput" class="join-code-input"
                                placeholder="Enter class code" maxlength="10">
                            <button class="join-submit-btn" onclick="joinClassByCode()">Join Class</button>
                        </div>

                        <div id="joinFeedback" class="join-feedback"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BROWSE CLASSES VIEW -->
        <div class="stud-view" id="browseView" style="display: none;">
            <div class="stud-view-head">
                <h1 class="view-main-title">Browse Classes</h1>
                <p class="view-sub-text">Explore available courses and join</p>
            </div>

            <div class="stud-view-body">
                <div id="browseClassesGrid" class="browse-classes-grid">
                    <div class="loading-box">
                        <div class="loading-spinner"></div>
                        <p class="loading-text">Loading available classes...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI RECOMMENDATIONS VIEW -->
        <div class="stud-view" id="recommendationsView" style="display: none;">
            <div class="stud-view-head">
                <h1 class="view-main-title">AI Recommendations</h1>
                <p class="view-sub-text">Personalized study paths based on your progress</p>
            </div>

            <div class="stud-view-body">
                <div id="studRecommendGrid" class="recommend-grid">
                    <div class="empty-state-box">
                        <div class="empty-ico">‚ú®</div>
                        <h3 class="empty-heading">Start learning to get recommendations</h3>
                        <p class="empty-desc">Our AI will suggest personalized study paths</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- KNOWLEDGE GAPS VIEW -->
        <div class="stud-view" id="gapsView" style="display: none;">
            <div class="stud-view-head">
                <h1 class="view-main-title">Knowledge Gaps</h1>
                <p class="view-sub-text">Areas to focus on for improvement</p>
            </div>

            <div class="stud-view-body">
                <div id="studGapsGrid" class="gaps-grid">
                    <div class="empty-state-box">
                        <div class="empty-ico">üéØ</div>
                        <h3 class="empty-heading">No gaps detected yet</h3>
                        <p class="empty-desc">Complete quizzes to identify areas for improvement</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- PROGRESS VIEW -->
        <div class="stud-view" id="progressView" style="display: none;">
            <div class="stud-view-head">
                <h1 class="view-main-title">My Learning Progress</h1>
                <p class="view-sub-text">Track your achievements and growth</p>
            </div>

            <div class="stud-view-body">
                <div id="studProgressGrid" class="progress-grid">
                    <div class="empty-state-box">
                        <div class="empty-ico">üìä</div>
                        <h3 class="empty-heading">No progress data yet</h3>
                        <p class="empty-desc">Complete activities to track your learning journey</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- RIGHT PANEL - AI TUTOR -->
    <aside class="stud-ai-panel" id="studAIPanel">
        <div class="sai-header">
            <div class="sai-brand-block">
                <span class="sai-title">KyKnoX AI</span>
                <span class="sai-subtitle">Your AI Tutor</span>
            </div>
            <button class="sai-close-btn" onclick="closeStudAI()">‚úï</button>
        </div>

        <div class="sai-mode-tabs">
            <button class="sai-tab active" onclick="switchStudAIMode('socratic')">Socratic</button>
            <button class="sai-tab" onclick="switchStudAIMode('expert')">Expert</button>
            <button class="sai-tab" onclick="switchStudAIMode('coach')">Coach</button>
        </div>

        <div class="sai-chat-area" id="studAIMessages">
            <div class="sai-welcome-box">
                <div class="welcome-avatar">ü§ñ</div>
                <p class="welcome-message">Hi {{ session.name }}! I'm KyKnoX, your AI tutor. Ask me anything!</p>
            </div>
        </div>

        <div class="sai-input-section">
            <textarea class="sai-input-field" id="studAIInput" placeholder="Ask me anything..." rows="2"></textarea>
            <button class="sai-send-btn" onclick="sendStudAI()">‚Üí</button>
        </div>
    </aside>

    <!-- AI FLOAT BUTTON -->
    <button class="ai-float-stud" id="aiFloatStud" onclick="openStudAI()">
        <span>ü§ñ</span>
    </button>

    <!-- Mobile Overlay -->
    <div class="stud-overlay" id="studOverlay" onclick="closeAllStudMobile()"></div>

    <!-- Toast Notification -->
    <div class="toast-notification" id="toastNotification"></div>
</div>

<script>
    // State
    let currentStudView = 'dashboard';
    let currentStudAIMode = 'socratic';
    let studAIOpen = false;
    let studClasses = [];

    // View Navigation
    function switchStudentView(viewName) {
        document.querySelectorAll('.stud-view').forEach(v => v.style.display = 'none');
        document.getElementById(viewName + 'View').style.display = 'flex';

        document.querySelectorAll('.nav-menu-item').forEach(link => {
            link.classList.remove('active');
        });

        // Find and activate the corresponding nav item
        const navItems = Array.from(document.querySelectorAll('.nav-menu-item'));
        const viewMap = {
            'dashboard': 0,
            'join': 1,
            'browse': 2,
            'recommendations': 3,
            'gaps': 4,
            'progress': 5
        };
        if (viewMap[viewName] !== undefined) {
            navItems[viewMap[viewName]]?.classList.add('active');
        }

        currentStudView = viewName;

        if (viewName === 'browse') loadBrowseClasses();
        if (viewName === 'gaps') loadKnowledgeGaps();
        if (viewName === 'recommendations') loadRecommendations();
        if (viewName === 'progress') loadProgress();
    }

    // Mobile
    function toggleStudSidebar() {
        document.getElementById('studSidebar').classList.toggle('mobile-show');
        document.getElementById('studOverlay').classList.add('show');
    }

    function toggleStudAI() {
        if (studAIOpen) closeStudAI();
        else openStudAI();
    }

    function closeAllStudMobile() {
        document.getElementById('studSidebar').classList.remove('mobile-show');
        document.getElementById('studOverlay').classList.remove('show');
    }

    // AI Panel
    function openStudAI() {
        document.getElementById('studAIPanel').classList.add('open');
        document.getElementById('studCenter').classList.add('ai-active');
        document.getElementById('aiFloatStud').style.display = 'none';
        studAIOpen = true;
    }

    function closeStudAI() {
        document.getElementById('studAIPanel').classList.remove('open');
        document.getElementById('studCenter').classList.remove('ai-active');
        document.getElementById('aiFloatStud').style.display = 'flex';
        studAIOpen = false;
    }

    function switchStudAIMode(mode) {
        currentStudAIMode = mode;
        document.querySelectorAll('.sai-tab').forEach(tab => tab.classList.remove('active'));
        event.target.classList.add('active');
    }

    function sendStudAI() {
        const input = document.getElementById('studAIInput');
        const msg = input.value.trim();
        if (!msg) return;

        const container = document.getElementById('studAIMessages');
        const welcome = container.querySelector('.sai-welcome-box');
        if (welcome) welcome.remove();

        // User message
        const userDiv = document.createElement('div');
        userDiv.className = 'sai-message user-side';
        userDiv.innerHTML = `<div class="msg-bubble">${escapeHtml(msg)}</div>`;
        container.appendChild(userDiv);

        input.value = '';
        container.scrollTop = container.scrollHeight;

        // AI Response
        fetch('/api/chatbot', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt: msg, mode: currentStudAIMode })
        })
            .then(res => res.json())
            .then(data => {
                const aiDiv = document.createElement('div');
                aiDiv.className = 'sai-message ai-side';
                aiDiv.innerHTML = `<div class="msg-bubble">${data.response || data.answer}</div>`;
                container.appendChild(aiDiv);
                container.scrollTop = container.scrollHeight;
            })
            .catch(err => {
                console.error('AI error:', err);
                showToast('Failed to get AI response', 'error');
            });
    }

    document.getElementById('studAIInput')?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendStudAI();
        }
    });

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    // Toast Notification
    function showToast(message, type = 'info') {
        const toast = document.getElementById('toastNotification');
        toast.textContent = message;
        toast.className = 'toast-notification show ' + type;
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }

    // Join Class
    async function joinClassByCode() {
        const input = document.getElementById('classCodeInput');
        const code = input.value.trim();
        const feedback = document.getElementById('joinFeedback');

        if (!code) {
            feedback.innerHTML = '<div class="feedback-error">Please enter a class code</div>';
            return;
        }

        feedback.innerHTML = '<div class="feedback-loading">Joining class...</div>';

        try {
            const response = await fetch('/api/join_class', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ class_code: code })
            });

            const data = await response.json();

            if (response.ok) {
                feedback.innerHTML = '<div class="feedback-success">‚úì Successfully joined class!</div>';
                input.value = '';
                showToast('Successfully joined class!', 'success');
                setTimeout(() => {
                    switchStudentView('dashboard');
                    loadStudentData();
                }, 1500);
            } else {
                feedback.innerHTML = `<div class="feedback-error">‚úó ${data.error || 'Failed to join class'}</div>`;
            }
        } catch (error) {
            feedback.innerHTML = '<div class="feedback-error">‚úó Network error. Please try again.</div>';
        }
    }

    // Load Data
    async function loadStudentData() {
        try {
            const response = await fetch('/api/user/data');
            if (!response.ok) throw new Error('Failed');
            const data = await response.json();

            studClasses = data.classes || [];
            renderClasses();
        } catch (error) {
            console.error('Load error:', error);
            renderClasses(); // Render empty state
        }
    }

    function renderClasses() {
        const container = document.getElementById('studClassesGrid');
        if (!studClasses.length) {
            container.innerHTML = `
            <div class="empty-state-box">
                <div class="empty-ico">üìö</div>
                <h3 class="empty-heading">No classes yet</h3>
                <p class="empty-desc">Join a class to start your learning journey</p>
                <button class="empty-btn" onclick="switchStudentView('join')">Join Class</button>
            </div>
        `;
            return;
        }

        container.innerHTML = studClasses.map(cls => `
        <div class="stud-class-card">
            <div class="scard-border"></div>
            <h3 class="scard-title">${cls.name || cls.title}</h3>
            <p class="scard-teacher">Teacher: ${cls.teacher || 'Unknown'}</p>
            <p class="scard-subject">${cls.subject || cls.description || 'Online Class'}</p>
            <div class="scard-progress-row">
                <div class="progress-track">
                    <div class="progress-fill" style="width: ${cls.progress || 0}%"></div>
                </div>
                <span class="progress-pct">${cls.progress || 0}%</span>
            </div>
            <button class="scard-btn" onclick="window.location.href='/class/${cls.id}'">Enter Class ‚Üí</button>
        </div>
    `).join('');
    }

    async function loadBrowseClasses() {
        const container = document.getElementById('browseClassesGrid');
        container.innerHTML = `
        <div class="loading-box">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading available classes...</p>
        </div>
    `;

        try {
            const response = await fetch('/api/browse_classes');
            const classes = await response.json();

            if (!classes || classes.length === 0) {
                container.innerHTML = `
                <div class="empty-state-box">
                    <div class="empty-ico">üîç</div>
                    <h3 class="empty-heading">No classes available</h3>
                    <p class="empty-desc">Check back later for new courses</p>
                </div>
            `;
                return;
            }

            container.innerHTML = classes.map(cls => `
            <div class="browse-class-card">
                <div class="bcard-border"></div>
                <h3 class="bcard-title">${cls.title}</h3>
                <p class="bcard-instructor">Instructor: ${cls.teacher || cls.instructor || 'Unknown'}</p>
                <p class="bcard-desc">${cls.description || 'No description available'}</p>
                <div class="bcard-footer">
                    <span class="bcard-students">üë• ${cls.student_count || 0} students</span>
                    <button class="bcard-join-btn" onclick="joinClassById(${cls.id})">Join ‚Üí</button>
                </div>
            </div>
        `).join('');
        } catch (error) {
            console.error('Browse error:', error);
            container.innerHTML = `
            <div class="empty-state-box">
                <div class="empty-ico">‚ö†Ô∏è</div>
                <h3 class="empty-heading">Failed to load classes</h3>
                <p class="empty-desc">Please try again later</p>
            </div>
        `;
        }
    }

    async function joinClassById(classId) {
        showToast('Joining class...', 'info');
        try {
            const response = await fetch('/api/join_class', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ class_id: classId })
            });

            const data = await response.json();

            if (response.ok) {
                showToast('Successfully joined class!', 'success');
                setTimeout(() => {
                    switchStudentView('dashboard');
                    loadStudentData();
                }, 1500);
            } else {
                showToast(data.error || 'Failed to join class', 'error');
            }
        } catch (error) {
            showToast('Network error. Please try again.', 'error');
        }
    }

    async function loadKnowledgeGaps() {
        const container = document.getElementById('studGapsGrid');
        container.innerHTML = `
            <div class="loading-box">
                <div class="loading-spinner"></div>
                <p class="loading-text">Analyzing your performance...</p>
            </div>
        `;

        try {
            const response = await fetch('/api/student/knowledge-gaps');
            const data = await response.json();

            if (!data.gaps || data.gaps.length === 0) {
                container.innerHTML = `
                    <div class="empty-state-box">
                        <div class="empty-ico">üéØ</div>
                        <h3 class="empty-heading">No gaps detected yet</h3>
                        <p class="empty-desc">Complete quizzes to identify areas for improvement</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = data.gaps.map(gap => `
                <div class="gap-card ${gap.severity}">
                    <div class="gap-header">
                        <h3 class="gap-topic">${gap.topic}</h3>
                        <span class="gap-severity ${gap.severity}">${gap.severity.toUpperCase()}</span>
                    </div>
                    ${gap.score > 0 ? `<div class="gap-score">Current Score: ${gap.score}%</div>` : ''}
                    <div class="gap-section">
                        <h4>Common Mistakes:</h4>
                        <ul>
                            ${gap.common_mistakes.map(m => `<li>${m}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="gap-section">
                        <h4>Recommended Resources:</h4>
                        <div class="gap-resources">
                            ${gap.recommended_resources.map(r => `
                                <div class="resource-item">
                                    <span class="resource-type">${r.type}</span>
                                    <span class="resource-title">${r.title}</span>
                                    <span class="resource-meta">${r.duration || (r.questions ? r.questions + ' questions' : r.pages + ' pages')}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="gap-plan">
                        <strong>Improvement Plan:</strong>
                        <p>${gap.improvement_plan}</p>
                    </div>
                </div>
            `).join('');
        } catch (error) {
            console.error('Error loading knowledge gaps:', error);
            container.innerHTML = `
                <div class="empty-state-box">
                    <div class="empty-ico">‚ö†Ô∏è</div>
                    <h3 class="empty-heading">Failed to load knowledge gaps</h3>
                    <p class="empty-desc">Please try again later</p>
                </div>
            `;
        }
    }

    async function loadRecommendations() {
        const container = document.getElementById('studRecommendGrid');
        container.innerHTML = `
            <div class="loading-box">
                <div class="loading-spinner"></div>
                <p class="loading-text">Generating personalized recommendations...</p>
            </div>
        `;

        try {
            const response = await fetch('/api/student/recommendations');
            const data = await response.json();

            if (!data.recommendations || data.recommendations.length === 0) {
                container.innerHTML = `
                    <div class="empty-state-box">
                        <div class="empty-ico">‚ú®</div>
                        <h3 class="empty-heading">Start learning to get recommendations</h3>
                        <p class="empty-desc">Our AI will suggest personalized study paths</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = data.recommendations.map(rec => `
                <div class="recommend-card ${rec.priority}">
                    <div class="rec-icon">${rec.icon}</div>
                    <div class="rec-content">
                        <div class="rec-header">
                            <h3 class="rec-title">${rec.title}</h3>
                            <span class="rec-priority ${rec.priority}">${rec.priority}</span>
                        </div>
                        <p class="rec-description">${rec.description}</p>
                        <div class="rec-footer">
                            <span class="rec-time">‚è±Ô∏è ${rec.estimated_time}</span>
                            <button class="rec-action-btn" onclick="switchStudentView('browse')">${rec.action}</button>
                        </div>
                    </div>
                </div>
            `).join('');
        } catch (error) {
            console.error('Error loading recommendations:', error);
            container.innerHTML = `
                <div class="empty-state-box">
                    <div class="empty-ico">‚ö†Ô∏è</div>
                    <h3 class="empty-heading">Failed to load recommendations</h3>
                    <p class="empty-desc">Please try again later</p>
                </div>
            `;
        }
    }

    function loadProgress() {
        // Placeholder - would load from API
        console.log('Loading progress');
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
        loadStudentData();
    });
</script>

<style>
    /* ============================================
   STUDENT DASHBOARD - FINAL POLISHED
   ============================================ */

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        user-select: none;
        /* Prevent text selection globally */
    }

    /* Allow text selection in input areas */
    input,
    textarea,
    .sai-input-field,
    .join-code-input {
        user-select: text;
    }

    .student-app {
        display: flex;
        height: 100vh;
        overflow: hidden;
        background: #0a0e1a;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    /* ============================================
   LEFT SIDEBAR - FIXED
   ============================================ */

    .stud-sidebar {
        width: 220px;
        background: #111827;
        border-right: 1px solid rgba(75, 85, 99, 0.3);
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
    }

    .sidebar-brand-area {
        padding: 24px 20px;
        border-bottom: 1px solid rgba(75, 85, 99, 0.3);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }

    .brand-logo-img {
        width: 40px;
        height: 40px;
    }

    .brand-title-text {
        font-size: 18px;
        font-weight: 700;
        color: #60a5fa;
    }

    .brand-role-badge {
        font-size: 11px;
        font-weight: 600;
        color: #10b981;
        background: rgba(16, 185, 129, 0.1);
        padding: 4px 12px;
        border-radius: 12px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .sidebar-nav-menu {
        flex: 1;
        padding: 16px 12px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        overflow-y: auto;
    }

    .nav-menu-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px 16px;
        border-radius: 10px;
        color: #9ca3af;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        cursor: pointer;
    }

    .nav-menu-item:hover {
        background: rgba(96, 165, 250, 0.1);
        color: #e5e7eb;
        box-shadow: 0 0 12px rgba(96, 165, 250, 0.15);
    }

    .nav-menu-item.active {
        background: rgba(96, 165, 250, 0.15);
        color: #60a5fa;
        box-shadow: 0 0 16px rgba(96, 165, 250, 0.2);
    }

    .item-icon {
        font-size: 22px;
        width: 28px;
        text-align: center;
    }

    .sidebar-logout-area {
        padding: 16px 12px;
        border-top: 1px solid rgba(75, 85, 99, 0.3);
    }

    .logout-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 14px;
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        border-radius: 10px;
        color: #ef4444;
        text-decoration: none;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.2s;
        cursor: pointer;
    }

    .logout-button:hover {
        background: rgba(239, 68, 68, 0.2);
        box-shadow: 0 0 12px rgba(239, 68, 68, 0.2);
    }

    .logout-ico {
        font-size: 18px;
    }

    /* User Profile Section */
    .sidebar-user-profile {
        padding: 16px 12px;
        border-top: 1px solid rgba(75, 85, 99, 0.3);
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        color: white;
        font-size: 18px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .user-info {
        flex: 1;
        min-width: 0;
    }

    .user-name {
        font-size: 14px;
        font-weight: 600;
        color: #e5e7eb;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .user-email {
        font-size: 12px;
        color: #6b7280;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* ============================================
   CENTER CONTENT - ADAPTIVE
   ============================================ */

    .stud-center {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: margin-right 0.3s ease;
    }

    .stud-center.ai-active {
        margin-right: 380px;
    }

    .stud-mobile-head {
        display: none;
    }

    .stud-view {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    .stud-view-head {
        padding: 32px 40px 24px;
        border-bottom: 1px solid rgba(75, 85, 99, 0.3);
        background: #111827;
    }

    .view-main-title {
        font-size: 28px;
        font-weight: 700;
        color: #e5e7eb;
        margin-bottom: 4px;
    }

    .view-sub-text {
        font-size: 15px;
        color: #9ca3af;
    }

    .stud-view-body {
        flex: 1;
        padding: 32px 40px;
        overflow-y: auto;
    }

    .view-section {
        margin-bottom: 40px;
    }

    .section-label {
        font-size: 20px;
        font-weight: 600;
        color: #e5e7eb;
        margin-bottom: 20px;
    }

    .section-head-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    /* Quick Actions Grid */
    .quick-act-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
    }

    .quick-act-box {
        background: #1f2937;
        border: 1px solid rgba(75, 85, 99, 0.3);
        border-radius: 12px;
        padding: 24px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
    }

    .quick-act-box:hover {
        transform: translateY(-4px);
        border-color: #60a5fa;
        box-shadow: 0 8px 20px rgba(96, 165, 250, 0.3);
    }

    .qact-icon {
        font-size: 48px;
        margin-bottom: 12px;
    }

    .qact-title {
        font-size: 16px;
        font-weight: 600;
        color: #e5e7eb;
        margin-bottom: 6px;
    }

    .qact-text {
        font-size: 13px;
        color: #9ca3af;
    }

    /* Join Class Container */
    .join-class-container {
        max-width: 600px;
        margin: 40px auto;
    }

    .join-class-card {
        background: #1f2937;
        border: 1px solid rgba(75, 85, 99, 0.3);
        border-radius: 16px;
        padding: 40px;
        text-align: center;
    }

    .join-icon-area {
        margin-bottom: 24px;
    }

    .join-icon {
        font-size: 72px;
    }

    .join-card-title {
        font-size: 24px;
        font-weight: 700;
        color: #e5e7eb;
        margin-bottom: 12px;
    }

    .join-card-desc {
        font-size: 15px;
        color: #9ca3af;
        margin-bottom: 32px;
    }

    .join-input-group {
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    .join-code-input {
        padding: 16px 20px;
        background: #111827;
        border: 2px solid rgba(75, 85, 99, 0.3);
        border-radius: 12px;
        color: #e5e7eb;
        font-size: 16px;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 600;
        outline: none;
        transition: all 0.2s;
    }

    .join-code-input:focus {
        border-color: #60a5fa;
        box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.1);
    }

    .join-submit-btn {
        padding: 16px 32px;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        border: none;
        border-radius: 12px;
        color: white;
        font-size: 16px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s;
    }

    .join-submit-btn:hover {
        box-shadow: 0 8px 24px rgba(236, 72, 153, 0.4);
        transform: translateY(-2px);
    }

    .join-feedback {
        margin-top: 20px;
        min-height: 24px;
    }

    .feedback-error,
    .feedback-success,
    .feedback-loading {
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
    }

    .feedback-error {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #ef4444;
    }

    .feedback-success {
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid rgba(16, 185, 129, 0.3);
        color: #10b981;
    }

    .feedback-loading {
        background: rgba(96, 165, 250, 0.1);
        border: 1px solid rgba(96, 165, 250, 0.3);
        color: #60a5fa;
    }

    /* Classes Grid */
    .stud-classes-grid,
    .browse-classes-grid,
    .recommend-grid,
    .gaps-grid,
    .progress-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 24px;
    }

    .stud-class-card,
    .browse-class-card {
        position: relative;
        background: #1f2937;
        border-radius: 14px;
        padding: 24px;
        transition: transform 0.3s;
    }

    .stud-class-card:hover,
    .browse-class-card:hover {
        transform: translateY(-2px);
    }

    .scard-border,
    .bcard-border {
        position: absolute;
        inset: 0;
        border-radius: 14px;
        padding: 2px;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
        pointer-events: none;
    }

    .scard-title,
    .bcard-title {
        font-size: 20px;
        font-weight: 700;
        color: #e5e7eb;
        margin-bottom: 8px;
    }

    .scard-teacher,
    .bcard-instructor {
        font-size: 13px;
        color: #6b7280;
        margin-bottom: 4px;
    }

    .scard-subject,
    .bcard-desc {
        font-size: 14px;
        color: #9ca3af;
        margin-bottom: 16px;
        line-height: 1.5;
    }

    .scard-progress-row {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
    }

    .progress-track {
        flex: 1;
        height: 8px;
        background: rgba(59, 130, 246, 0.2);
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #3b82f6, #06b6d4);
        border-radius: 4px;
        transition: width 0.5s;
    }

    .progress-pct {
        font-size: 12px;
        color: #9ca3af;
        white-space: nowrap;
    }

    .scard-btn {
        width: 100%;
        padding: 12px;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s;
    }

    .scard-btn:hover {
        box-shadow: 0 8px 16px rgba(236, 72, 153, 0.4);
    }

    .bcard-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 16px;
    }

    .bcard-students {
        font-size: 13px;
        color: #9ca3af;
    }

    .bcard-join-btn {
        padding: 10px 20px;
        background: linear-gradient(135deg, #3b82f6, #06b6d4);
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .bcard-join-btn:hover {
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    }

    /* Loading State */
    .loading-box {
        grid-column: 1 / -1;
        text-align: center;
        padding: 80px 20px;
    }

    .loading-spinner {
        width: 48px;
        height: 48px;
        border: 4px solid rgba(96, 165, 250, 0.2);
        border-top-color: #60a5fa;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 16px;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    .loading-text {
        font-size: 15px;
        color: #9ca3af;
    }

    /* Empty State */
    .empty-state-box {
        grid-column: 1 / -1;
        text-align: center;
        padding: 80px 20px;
        background: #1f2937;
        border-radius: 12px;
        border: 2px dashed rgba(75, 85, 99, 0.3);
    }

    .empty-ico {
        font-size: 64px;
        margin-bottom: 20px;
    }

    .empty-heading {
        font-size: 22px;
        font-weight: 600;
        color: #e5e7eb;
        margin-bottom: 8px;
    }

    .empty-desc {
        font-size: 15px;
        color: #9ca3af;
        margin-bottom: 20px;
    }

    .empty-btn {
        padding: 12px 24px;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s;
    }

    .empty-btn:hover {
        box-shadow: 0 8px 16px rgba(236, 72, 153, 0.4);
    }

    /* ============================================
   RIGHT PANEL - AI TUTOR
   ============================================ */

    .stud-ai-panel {
        width: 380px;
        background: #1a2332;
        border-left: 1px solid rgba(75, 85, 99, 0.3);
        display: flex;
        flex-direction: column;
        position: fixed;
        right: 0;
        top: 0;
        bottom: 0;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        z-index: 90;
    }

    .stud-ai-panel.open {
        transform: translateX(0);
    }

    .sai-header {
        padding: 20px 24px;
        border-bottom: 1px solid rgba(75, 85, 99, 0.3);
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .sai-brand-block {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .sai-title {
        font-size: 18px;
        font-weight: 700;
        color: #60a5fa;
    }

    .sai-subtitle {
        font-size: 12px;
        color: #6b7280;
    }

    .sai-close-btn {
        width: 32px;
        height: 32px;
        background: rgba(107, 114, 128, 0.2);
        border: none;
        border-radius: 8px;
        color: #9ca3af;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .sai-close-btn:hover {
        background: rgba(107, 114, 128, 0.3);
        color: #e5e7eb;
        box-shadow: 0 0 8px rgba(107, 114, 128, 0.3);
    }

    .sai-mode-tabs {
        display: flex;
        gap: 8px;
        padding: 16px 24px;
        border-bottom: 1px solid rgba(75, 85, 99, 0.3);
    }

    .sai-tab {
        flex: 1;
        padding: 10px;
        background: transparent;
        border: 1px solid rgba(75, 85, 99, 0.3);
        border-radius: 8px;
        color: #9ca3af;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .sai-tab:hover {
        background: rgba(96, 165, 250, 0.1);
        box-shadow: 0 0 8px rgba(96, 165, 250, 0.1);
    }

    .sai-tab.active {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
        box-shadow: 0 0 12px rgba(59, 130, 246, 0.3);
    }

    .sai-chat-area {
        flex: 1;
        padding: 24px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    .sai-welcome-box {
        text-align: center;
        padding: 40px 20px;
    }

    .welcome-avatar {
        font-size: 64px;
        margin-bottom: 16px;
    }

    .welcome-message {
        font-size: 15px;
        color: #9ca3af;
        line-height: 1.6;
    }

    .sai-message {
        display: flex;
        flex-direction: column;
    }

    .msg-bubble {
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 14px;
        line-height: 1.6;
        max-width: 85%;
    }

    .user-side .msg-bubble {
        background: #3b82f6;
        color: white;
        align-self: flex-end;
        border-bottom-right-radius: 4px;
    }

    .ai-side .msg-bubble {
        background: #374151;
        color: #e5e7eb;
        align-self: flex-start;
        border-bottom-left-radius: 4px;
    }

    .sai-input-section {
        padding: 20px 24px;
        border-top: 1px solid rgba(75, 85, 99, 0.3);
        display: flex;
        gap: 12px;
    }

    .sai-input-field {
        flex: 1;
        padding: 12px 16px;
        background: #111827;
        border: 1px solid rgba(75, 85, 99, 0.3);
        border-radius: 10px;
        color: #e5e7eb;
        font-size: 14px;
        font-family: inherit;
        resize: none;
        outline: none;
        transition: all 0.2s;
    }

    .sai-input-field:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    }

    .sai-send-btn {
        width: 44px;
        height: 44px;
        background: linear-gradient(135deg, #3b82f6, #06b6d4);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 20px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .sai-send-btn:hover {
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    }

    /* AI Float Button */
    .ai-float-stud {
        position: fixed;
        right: 32px;
        top: 32px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        border: none;
        border-radius: 50%;
        color: white;
        font-size: 28px;
        cursor: pointer;
        box-shadow: 0 8px 24px rgba(236, 72, 153, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 80;
        transition: all 0.3s;
    }

    .ai-float-stud:hover {
        transform: scale(1.1);
        box-shadow: 0 12px 32px rgba(236, 72, 153, 0.5);
    }

    /* Toast Notification */
    .toast-notification {
        position: fixed;
        bottom: 24px;
        right: 24px;
        padding: 16px 24px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 600;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.3s;
        z-index: 1000;
        pointer-events: none;
    }

    .toast-notification.show {
        opacity: 1;
        transform: translateY(0);
    }

    .toast-notification.info {
        background: rgba(96, 165, 250, 0.1);
        border: 1px solid rgba(96, 165, 250, 0.3);
        color: #60a5fa;
        box-shadow: 0 8px 24px rgba(96, 165, 250, 0.3);
    }

    .toast-notification.success {
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid rgba(16, 185, 129, 0.3);
        color: #10b981;
        box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);
    }

    .toast-notification.error {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #ef4444;
        box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);
    }

    .stud-overlay {
        display: none;
    }

    /* ============================================
   RESPONSIVE
   ============================================ */

    @media (max-width: 1024px) {
        .stud-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            z-index: 200;
            transform: translateX(-100%);
            transition: transform 0.3s;
        }

        .stud-sidebar.mobile-show {
            transform: translateX(0);
        }

        .stud-center {
            margin-right: 0 !important;
        }

        .stud-mobile-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: #111827;
            border-bottom: 1px solid rgba(75, 85, 99, 0.3);
        }

        .mob-sidebar-btn,
        .mob-ai-btn {
            width: 44px;
            height: 44px;
            background: rgba(75, 85, 99, 0.2);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 10px;
            color: #e5e7eb;
            font-size: 20px;
            cursor: pointer;
        }

        .mob-brand-text {
            font-size: 18px;
            font-weight: 700;
            color: #60a5fa;
        }

        .stud-overlay {
            display: block;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 180;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .stud-overlay.show {
            opacity: 1;
            pointer-events: all;
        }

        .quick-act-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .ai-float-stud {
            display: none !important;
        }
    }

    @media (max-width: 640px) {
        .stud-view-head {
            padding: 24px 20px 16px;
        }

        .view-main-title {
            font-size: 24px;
        }

        .stud-view-body {
            padding: 24px 20px;
        }

        .quick-act-grid {
            grid-template-columns: 1fr;
        }

        .stud-classes-grid,
        .browse-classes-grid,
        .recommend-grid,
        .gaps-grid,
        .progress-grid {
            grid-template-columns: 1fr;
        }

        .stud-ai-panel {
            width: 100%;
            height: 85vh;
            top: auto;
            border-radius: 24px 24px 0 0;
        }

        .join-class-card {
            padding: 32px 24px;
        }
    }

    /* Recommendation Cards */
    .recommend-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 20px;
        padding: 20px;
    }

    .recommend-card {
        background: rgba(30, 41, 59, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(96, 165, 250, 0.2);
        border-radius: 12px;
        padding: 20px;
        display: flex;
        gap: 16px;
        transition: all 0.3s ease;
    }

    .recommend-card:hover {
        transform: translateY(-4px);
        border-color: rgba(96, 165, 250, 0.5);
        box-shadow: 0 0 30px rgba(96, 165, 250, 0.3);
    }

    .rec-icon {
        font-size: 2.5rem;
        flex-shrink: 0;
    }

    .rec-content {
        flex: 1;
    }

    .rec-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 12px;
    }

    .rec-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: #e5e7eb;
    }

    .rec-priority {
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .rec-priority.high {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
    }

    .rec-priority.medium {
        background: rgba(245, 158, 11, 0.2);
        color: #f59e0b;
    }

    .rec-priority.low {
        background: rgba(96, 165, 250, 0.2);
        color: #60a5fa;
    }

    .rec-description {
        color: #9ca3af;
        font-size: 0.9rem;
        line-height: 1.5;
        margin-bottom: 16px;
    }

    .rec-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .rec-time {
        font-size: 0.85rem;
        color: #6b7280;
    }

    .rec-action-btn {
        padding: 8px 16px;
        background: linear-gradient(135deg, #60a5fa, #3b82f6);
        border: none;
        border-radius: 8px;
        color: white;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .rec-action-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(96, 165, 250, 0.5);
    }

    /* Knowledge Gap Cards */
    .gaps-grid {
        display: grid;
        gap: 20px;
        padding: 20px;
    }

    .gap-card {
        background: rgba(30, 41, 59, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(96, 165, 250, 0.2);
        border-radius: 12px;
        padding: 24px;
        transition: all 0.3s ease;
    }

    .gap-card.critical {
        border-color: rgba(239, 68, 68, 0.5);
    }

    .gap-card.moderate {
        border-color: rgba(245, 158, 11, 0.5);
    }

    .gap-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 20px rgba(96, 165, 250, 0.2);
    }

    .gap-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
    }

    .gap-topic {
        font-size: 1.3rem;
        font-weight: 700;
        color: #e5e7eb;
    }

    .gap-severity {
        padding: 6px 14px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
    }

    .gap-severity.critical {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
    }

    .gap-severity.moderate {
        background: rgba(245, 158, 11, 0.2);
        color: #f59e0b;
    }

    .gap-severity.minor {
        background: rgba(96, 165, 250, 0.2);
        color: #60a5fa;
    }

    .gap-score {
        font-size: 1.1rem;
        color: #f59e0b;
        margin-bottom: 16px;
        font-weight: 600;
    }

    .gap-section {
        margin-bottom: 20px;
    }

    .gap-section h4 {
        color: #60a5fa;
        font-size: 1rem;
        margin-bottom: 12px;
    }

    .gap-section ul {
        list-style: none;
        padding: 0;
    }

    .gap-section li {
        padding: 8px 0;
        color: #9ca3af;
        padding-left: 20px;
        position: relative;
    }

    .gap-section li::before {
        content: '‚Ä¢';
        position: absolute;
        left: 0;
        color: #60a5fa;
        font-weight: bold;
    }

    .gap-resources {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .resource-item {
        background: rgba(96, 165, 250, 0.05);
        border: 1px solid rgba(96, 165, 250, 0.2);
        border-radius: 8px;
        padding: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .resource-type {
        padding: 4px 10px;
        background: rgba(96, 165, 250, 0.2);
        color: #60a5fa;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .resource-title {
        flex: 1;
        margin: 0 12px;
        color: #e5e7eb;
        font-weight: 500;
    }

    .resource-meta {
        color: #6b7280;
        font-size: 0.85rem;
    }

    .gap-plan {
        background: rgba(96, 165, 250, 0.05);
        border-left: 3px solid #60a5fa;
        padding: 16px;
        border-radius: 8px;
    }

    .gap-plan strong {
        color: #60a5fa;
        display: block;
        margin-bottom: 8px;
    }

    .gap-plan p {
        color: #9ca3af;
        line-height: 1.6;
        margin: 0;
    }
</style>
{% endblock %}